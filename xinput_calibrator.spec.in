%global name @PACKAGE_NAME@
%global version @PACKAGE_VERSION@
%global release 1%{?dist}
%global _prefix /usr

Summary: Touchscreen calibrator
Name: %{name}
Version: %{version}
Release: %{release}
Source0: http://github.com/tias/%{name}/tarball/%{name}-%{version}.tar.gz
URL: http://www.freedesktop.org/wiki/Software/xinput_calibrator
License: MIT
Group: Applications/System
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires: gtkmm24-devel

%description
Calibrates touch screens and describes how to make the calibration permanent.

%prep
%setup -q

%build
export CXXFLAGS="$RPM_OPT_FLAGS"
%configure --prefix=%{_prefix} --libdir=%{_libdir}
make %{?_smp_mflags}

%install
rm -rf %{buildroot}
make install DESTDIR=%{buildroot} INSTALL="install -p"
desktop-file-install                                    \
    --delete-original                                   \
    --dir=%{buildroot}%{_datadir}/applications          \
    %{buildroot}%{_datadir}/applications/%{name}.desktop

%clean
rm -rf %{buildroot}

%files
%defattr(-,root,root,-)
%doc Changelog README
%{_bindir}/%{name}
%{_datadir}/applications/%{name}.desktop
%{_datadir}/pixmaps/%{name}.svg
%{_datadir}/pixmaps/%{name}.xpm
%{_mandir}/man1/%{name}.1.gz

%changelog
* Mon Jul 26 2010 Dave Ludlow <dave@adsllc.com> 0.6.2-1
- Initial packaging
